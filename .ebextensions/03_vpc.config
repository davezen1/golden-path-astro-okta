option_settings:
  aws:ec2:vpc:
    VPCId: vpc-0d731c66660f50324
    # Replace with your actual subnet IDs (comma-separated, at least 2 in different AZs)
    Subnets: subnet-xxxxxxxx,subnet-yyyyyyyy
    # Public subnets for the load balancer (if using)
    ELBSubnets: subnet-xxxxxxxx,subnet-yyyyyyyy
    # Set to true if instances need public IPs
    AssociatePublicIpAddress: true
    # Replace with your security group ID(s) (comma-separated)
    # SecurityGroups: sg-xxxxxxxxx

  # Configure to use existing/shared ALB
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    LoadBalancerType: application
    LoadBalancerIsShared: true

  # Your existing ALB configuration
  aws:elbv2:loadbalancer:
    # Replace with your ALB ARN
    SharedLoadBalancer: arn:aws:elasticloadbalancing:us-gov-east-1:ACCOUNT_ID:loadbalancer/app/YOUR_ALB_NAME/xxxxx
    # SecurityGroups: sg-xxxxxxxxx  # Optional: ALB security groups
    # ManagedSecurityGroup: sg-xxxxxxxxx  # Optional

  # HTTP Listener on port 80
  aws:elbv2:listener:80:
    ListenerEnabled: true
    Protocol: HTTP
    Rules: default
    DefaultProcess: default

  # HTTPS Listener on port 443
  aws:elbv2:listener:443:
    ListenerEnabled: true
    Protocol: HTTPS
    Rules: default
    DefaultProcess: default
    # Replace with your ACM certificate ARN
    SSLCertificateArns: arn:aws:acm:us-gov-east-1:ACCOUNT_ID:certificate/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

  # Optional: Redirect HTTP to HTTPS
  aws:elbv2:listenerrule:redirect:
    PathPatterns: /*
    Priority: 1
    Process: https-redirect

  # HTTPS redirect process
  aws:elasticbeanstalk:environment:process:https-redirect:
    Port: 443
    Protocol: HTTPS
